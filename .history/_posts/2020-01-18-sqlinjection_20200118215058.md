---
layout: post
title: 你了解 Java 开发中的注入攻击吗?
subtitle: 是时候去拥抱新世界了！！！Lazy Bob
---
安全是软件开发领域永远的主题之一，随着新技术浪潮的兴起，安全的重要性愈发凸显出来，对于金融等行业，甚至可以说安全是企业的生命线。

问题31: 你了解 Java 开发中的注入攻击吗?

### 典型回答

注入式（Inject）攻击是一类非常常见的攻击方式，其基本特征是程序允许攻击者将不可信的动态内容注入到程序中，并将其执行，这就可能完全改变最初预计的执行过程，产生恶意效果。

下面是几种主要的注入攻击:

* 最为常见的 SQL 的注入攻击,一个典型的场景就是 Web 端登录功能,根据用户的输入的用户名和密码,区数据库进行核实.

假设应用的逻辑是,
~~~ bash

Select * from use_info where username = “input_usr_name” and password = “input_pwd”
~~~

但是如果登录用户输入的是:
~~~ bash

“ or “”=”
~~~

JDBC 执行的时候,拼接起来就是:

~~~ bash

Select * from use_info where username = “input_usr_name” and password = “” or “” = “”
~~~

此时无论输入什么用户名都可以通过核实.

如果数据库权限控制不合理，攻击效果就可能是灾难性的。

* 操作系统命令注入,Java 语言提供了类似 Runtime.exec(…) 的 API，可以用来执行特定命令，假设我们构建了一个应用，以输入文本作为参数，执行下面的命令：

~~~ 　bash

ls –la input_file_name

~~~

但是如果用户输入是 “input_file_name;rm –rf /*”，这就有可能出现问题了。

* XML 注入攻击,ava 核心类库提供了全面的 XML 处理、转换等各种 API，而 XML 自身是可以包含动态内容的，例如 XPATH，如果使用不当，可能导致访问恶意内容。

还有类似 LDAP 等允许动态内容的协议，都是可能利用特定命令，构造注入式攻击的，包括 XSS（Cross-site Scripting）攻击，虽然并不和 Java 直接相关，但也可能在 JSP 等动态页面中发生。

### 考点分析

在面试中，面试官可能会考察安全问题，但如果不是特定安全专家岗位，了解基础的安全实践就可以满足要求了。

今天侧重和 Java 开发相关的安全内容:
* 谈到 Java 应用安全,主要涉及哪些安全机制?
* 到底什么是安全漏洞?对于前面的注入攻击,应该怎么在开发中去避免?

### 扩展知识

组成 Java 安全基础的可以分成三部分:
* 运行时安全机制,限制 Java 运行的权限,不允许越权的操作,具体的实现:
   * 在类加载时进行字节码校验,防止影响 JVM 正常功能或恶意代码的注入
   * 类加载器本身也可以对代码之间进行隔离,不同的类加载器也可以起到容器的作用，隔离模块之间不必要的可见性等.
   * 利用 SercurityManager 机制和相关组件,限制代码运行时行为能力.
   * Java 的 GC 机制,及时回收内存,避免 OOM 导致拒绝服务.

* Java 提高安全框架的 API,这是构建安全通信的基础.
  * 加,解密 API
  * 授权,鉴权 API
  * 安全通信的相关类库,如基本 HTTPS 通信协议相关协议标准实现

* JDK 集成的各种安全工具.
  * ke'y